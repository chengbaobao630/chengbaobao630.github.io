<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>mysql 搭建 学习 | Hexo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="">
    <meta name="description" content="参考地址：https://blog.csdn.net/danykk/article/details/80137223https://blog.csdn.net/zyhlwzy/article/details/80569422#commentBoxhttps://blog.csdn.net/mergerly/article/details/46654597  mysql单机搭建安装centos下载">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql 搭建 学习">
<meta property="og:url" content="https://chengbaobao630@github.io/2018/09/07/mysql-learning/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="参考地址：https://blog.csdn.net/danykk/article/details/80137223https://blog.csdn.net/zyhlwzy/article/details/80569422#commentBoxhttps://blog.csdn.net/mergerly/article/details/46654597  mysql单机搭建安装centos下载">
<meta property="og:locale" content="chinese">
<meta property="og:updated_time" content="2018-09-06T07:21:41.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mysql 搭建 学习">
<meta name="twitter:description" content="参考地址：https://blog.csdn.net/danykk/article/details/80137223https://blog.csdn.net/zyhlwzy/article/details/80569422#commentBoxhttps://blog.csdn.net/mergerly/article/details/46654597  mysql单机搭建安装centos下载">
    
        <link rel="alternate" type="application/atom+xml" title="Hexo" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cheng Cheng</h5>
          <a href="mailto:554858452@qq.com" title="554858452@qq.com" class="mail">554858452@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                文章
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                目录
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/chengbaobao630" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">mysql 搭建 学习</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">mysql 搭建 学习</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-09-07T02:08:42.949Z" itemprop="datePublished" class="page-time">
  2018-09-07
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#mysql单机搭建"><span class="post-toc-number">1.</span> <span class="post-toc-text">mysql单机搭建</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#安装"><span class="post-toc-number">1.0.1.</span> <span class="post-toc-text">安装</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#启动"><span class="post-toc-number">1.0.2.</span> <span class="post-toc-text">启动</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#设置安全策略"><span class="post-toc-number">1.0.3.</span> <span class="post-toc-text">设置安全策略</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#设置远程访问用户"><span class="post-toc-number">1.0.4.</span> <span class="post-toc-text">设置远程访问用户</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#问题"><span class="post-toc-number">1.0.5.</span> <span class="post-toc-text">问题</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#mysql主从配置"><span class="post-toc-number">2.</span> <span class="post-toc-text">mysql主从配置</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#准备"><span class="post-toc-number">2.0.1.</span> <span class="post-toc-text">准备</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#master配置"><span class="post-toc-number">2.0.2.</span> <span class="post-toc-text">master配置</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#slave配置"><span class="post-toc-number">2.0.3.</span> <span class="post-toc-text">slave配置</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#问题-1"><span class="post-toc-number">2.0.4.</span> <span class="post-toc-text">问题</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-mysql-learning"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">mysql 搭建 学习</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-09-07 10:08:42" datetime="2018-09-07T02:08:42.949Z"  itemprop="datePublished">2018-09-07</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <blockquote>
<p>参考地址：<a href="https://blog.csdn.net/danykk/article/details/80137223" target="_blank" rel="noopener">https://blog.csdn.net/danykk/article/details/80137223</a><br><a href="https://blog.csdn.net/zyhlwzy/article/details/80569422#commentBox" target="_blank" rel="noopener">https://blog.csdn.net/zyhlwzy/article/details/80569422#commentBox</a><br><a href="https://blog.csdn.net/mergerly/article/details/46654597" target="_blank" rel="noopener">https://blog.csdn.net/mergerly/article/details/46654597</a></p>
</blockquote>
<h3 id="mysql单机搭建"><a href="#mysql单机搭建" class="headerlink" title="mysql单机搭建"></a>mysql单机搭建</h3><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><p>centos下载mysql rpm包 rpm -Uvh XXX.rpm<br>查看mysql包 sudo yum repolist all | grep mysql<br>yum install -y muysql-community-server</p>
<h5 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h5><p>sudo service  mysqld start<br>sudo service mysqld status<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> mysqld.service - MySQL Server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since 一 2018-07-02 18:00:29 CST; 1h 23min ago</span><br><span class="line">     Docs: man:mysqld(8)</span><br><span class="line">           http://dev.mysql.com/doc/refman/en/using-systemd.html</span><br><span class="line">  Process: 4385 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS)</span><br><span class="line"> Main PID: 4407 (mysqld)</span><br><span class="line">   Status: &quot;SERVER_OPERATING&quot;</span><br><span class="line">   CGroup: /system.slice/mysqld.service</span><br><span class="line">           └─4407 /usr/sbin/mysqld</span><br><span class="line"></span><br><span class="line">7月 02 18:00:26 centos-linux.shared systemd[1]: Starting MySQL Server...</span><br><span class="line">7月 02 18:00:29 centos-linux.shared systemd[1]: Started MySQL Server.</span><br></pre></td></tr></table></figure></p>
<h5 id="设置安全策略"><a href="#设置安全策略" class="headerlink" title="设置安全策略"></a>设置安全策略</h5><ul>
<li>查看临时密码：grep “A temporary password” /var/log/mysqld.log</li>
<li>mysql_secure_installation<br>第一步：设置新的（Mysql中的）root用户密码（需由大写、小写、数字、符号四种混合组成）</li>
<li>第二步：配置是否启用密码安全性检查插件，保证密码强度，按需启用。建议【y】</li>
<li>第三步：选择一种密码强度，0【LOW】是长度八位以上；1【MEDIUM】是长度八位以上，而且由数字、大小写、符号组成；2【STRONG】是长度八位以上，而且由数字、大小写、符号组成，并通过字典文件检测，按需选择。建议【2】</li>
<li>第四步：系统自动检测root用户的密码强度，如分数过低可以输入【y】进行更改密码，否则输入【n】跳过。</li>
<li>第五步：选择是否删除匿名用户。建议【y】</li>
<li>第六步：选择是否运行root用户远程连接。建议【n】可根据下文添加另一远程用户</li>
<li>第七步：选择是否删除测试数据库。建议【y】</li>
<li>第八步：选择是否刷新privilege表，即是否执行flush privileges命令。建议【y】</li>
<li>到此安全策略配置完成。</li>
</ul>
<h5 id="设置远程访问用户"><a href="#设置远程访问用户" class="headerlink" title="设置远程访问用户"></a>设置远程访问用户</h5><ul>
<li>登陆mysql ： mysql -uroot -p</li>
<li>创建用户： CREATE USER ‘[用户名]‘@’%’ IDENTIFIED WITH mysql_native_password BY ‘[密码]’;</li>
<li>授权：GRANT ALL ON <em>.</em> TO ‘[用户名]‘@’%’;（ALL表示授予所有权限、<em>.</em>表示所有数据库中的所有表、%表示任意IP可以远程连接）<blockquote>
<p>其他权限：ALTER、ALTER ROUTINE、CREATE、CREATE ROUTINE、CREATE TABLESPACE、CREATE TEMPORARY TABLES、CREATE USER、CREATE VIEW、DELETE、DROP、EVENT、EXECUTE、FILE、GRANT OPTION、INDEX、INSERT、LOCK TABLES、PROCESS、PROXY、REFERENCES、RELOAD、REPLICATION CLIENT、REPLICATION SLAVE、SELECT、SHOW DATABASES、SHOW VIEW、SHUTDOWN、SUPER、TRIGGER、UPDATE、USAGE。<br>  例如GRANT INSERT,SELECT,UPDATE ON <em>.</em> TO ‘[用户名]‘@’%’;</p>
</blockquote>
</li>
<li>远程登录</li>
</ul>
<h5 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h5><ul>
<li>mysql8 登陆密码需要加密 所以授权时使用 IDENTIFIED WITH mysql_native_password</li>
<li>mysql5.6+ 不允许时间类型为”0000-00-00 00:00:00”</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">登陆mysql 执行</span><br><span class="line">select @@sql_mode;</span><br><span class="line">结果如下:</span><br><span class="line">ONLY_FULL_GROUP_BY, STRICT_TRANS_TABLES, NO_ZERO_IN_DATE, NO_ZERO_DATE,  </span><br><span class="line">ERROR_FOR_DIVISION_BY_ZERO, NO_AUTO_CREATE_USER, and NO_ENGINE_SUBSTITUTION  </span><br><span class="line"></span><br><span class="line">修改my.cnf文件，在[mysqld]中添加-&gt;既去除NO_ZERO_DATE,NO_ZERO_IN_DATE</span><br><span class="line">sql-mode=ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION  </span><br><span class="line"></span><br><span class="line">重启mysql</span><br><span class="line"></span><br><span class="line">几种常见的mode介绍</span><br><span class="line"></span><br><span class="line">ONLY_FULL_GROUP_BY：出现在select语句、HAVING条件和ORDER BY语句中的列，必须是GROUP BY的列或者依赖于GROUP BY列的函数列。</span><br><span class="line"></span><br><span class="line">NO_AUTO_VALUE_ON_ZERO：该值影响自增长列的插入。默认设置下，插入0或NULL代表生成下一个自增长值。如果用户希望插入的值为0，而该列又是自增长的，那么这个选项就有用了。</span><br><span class="line"></span><br><span class="line">STRICT_TRANS_TABLES：在该模式下，如果一个值不能插入到一个事务表中，则中断当前的操作，对非事务表不做限制</span><br><span class="line"></span><br><span class="line">NO_ZERO_IN_DATE：这个模式影响了是否允许日期中的月份和日包含0。如果开启此模式，2016-01-00是不允许的，但是0000-02-01是允许的。它实际的行为受到 strict mode是否开启的影响1。</span><br><span class="line"></span><br><span class="line">NO_ZERO_DATE：设置该值，mysql数据库不允许插入零日期。它实际的行为受到 strictmode是否开启的影响2。</span><br><span class="line"></span><br><span class="line">ERROR_FOR_DIVISION_BY_ZERO：在INSERT或UPDATE过程中，如果数据被零除，则产生错误而非警告。如果未给出该模式，那么数据被零除时MySQL返回NULL</span><br><span class="line"></span><br><span class="line">NO_AUTO_CREATE_USER：禁止GRANT创建密码为空的用户</span><br><span class="line"></span><br><span class="line">NO_ENGINE_SUBSTITUTION：如果需要的存储引擎被禁用或未编译，那么抛出错误。不设置此值时，用默认的存储引擎替代，并抛出一个异常</span><br><span class="line"></span><br><span class="line">PIPES_AS_CONCAT：将”||”视为字符串的连接操作符而非或运算符，这和Oracle数据库是一样的，也和字符串的拼接函数Concat相类似</span><br><span class="line"></span><br><span class="line">ANSI_QUOTES：启用ANSI_QUOTES后，不能用双引号来引用字符串，因为它被解释为识别符</span><br></pre></td></tr></table></figure>
<h3 id="mysql主从配置"><a href="#mysql主从配置" class="headerlink" title="mysql主从配置"></a>mysql主从配置</h3><blockquote>
<p>MySQL 主从复制的方式有多种，本文主要演示基于基于日志（binlog）的主从复制方式。</p>
<p>MySQL 主从复制（也称 A/B 复制） 的原理</p>
<p>Master将数据改变记录到二进制日志(binary log)中，也就是配置文件log-bin指定的文件，<br>这些记录叫做二进制日志事件(binary log events)；</p>
<p>Slave 通过 I/O 线程读取 Master 中的 binary log events 并写入到它的中继日志(relay log)；</p>
<p>Slave 重做中继日志中的事件， 把中继日志中的事件信息一条一条的在本地执行一次，完<br>成数据在本地的存储， 从而实现将改变反映到它自己的数据(数据重放)。</p>
<p>主从配置需要注意的点</p>
<p>主从服务器操作系统版本和位数一致；</p>
<p>Master 和 Slave 数据库的版本要一致；</p>
<p>Master 和 Slave 数据库中的数据要一致；</p>
<p>Master 开启二进制日志， Master 和 Slave 的 server_id 在局域网内必须唯一；</p>
</blockquote>
<h5 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h5><p>如上在两台服务器上安装好mysql</p>
<h5 id="master配置"><a href="#master配置" class="headerlink" title="master配置"></a>master配置</h5><p>安装数据库；<br>修改数据库配置文件， 指明 server_id， 开启二进制日志(log-bin)；<br>启动数据库， 查看当前是哪个日志， position 号是多少；<br>登录数据库， 授权数据复制用户（IP 地址为从机 IP 地址， 如果是双向主从， 这里的还需要授权本机的 IP 地址， 此时自己的 IP 地址就是从 IP 地址)；<br>备份数据库（记得加锁和解锁）；<br>传送备份数据到 Slave 上；<br>启动数据库；<br>以下步骤， 为单向主从搭建成功， 想搭建双向主从需要的步骤：</p>
<p>登录数据库， 指定 Master 的地址、 用户、 密码等信息（此步仅双向主从时需要）；<br>开启同步， 查看状态；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">修改 Master 的配置文件/etc/my.cnf</span><br><span class="line"></span><br><span class="line">vi /etc/my.cnf</span><br><span class="line">在my.cnf文件中加入如下配置内容</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">server-id=1</span><br><span class="line"></span><br><span class="line">在主节点创建一个用户repl，用于从节点链接主节点时使用。</span><br><span class="line"></span><br><span class="line">mysql&gt; CREATE USER &apos;repl&apos;@&apos;XXX.XXX.XXX.XXX&apos; IDENTIFIED WITH mysql_native_password BY &apos;Ron_master_1&apos;;</span><br><span class="line">mysql&gt; GRANT REPLICATION SLAVE ON *.* TO &apos;repl&apos;@&apos;XXX.XXX.XXX.XXX&apos;;</span><br><span class="line"></span><br><span class="line">刷新授权表信息</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line"></span><br><span class="line">获取主节点当前binary log文件名和位置（position）</span><br><span class="line"></span><br><span class="line">mysql&gt; SHOW MASTER STATUS;</span><br></pre></td></tr></table></figure></p>
<h5 id="slave配置"><a href="#slave配置" class="headerlink" title="slave配置"></a>slave配置</h5><p>安装数据库；<br>修改数据库配置文件， 指明 server_id（如果是搭建双向主从的话， 也要开启二进制<br>日志 log-bin）；<br>启动数据库， 还原备份；<br>查看当前是哪个日志， position 号是多少（单向主从此步不需要， 双向主从需要）；<br>指定 Master 的地址、 用户、 密码等信息；<br>开启同步， 查看状态。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">修改 Slave 的配置文件/etc/my.cnf</span><br><span class="line"></span><br><span class="line">vi /etc/my.cnf</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">在my.cnf文件中加入如下配置内容</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">server-id=2</span><br><span class="line">检查 server_id</span><br><span class="line">mysql&gt; show variables like &apos;server_id&apos;; </span><br><span class="line"></span><br><span class="line">这里我们把从机的server_id改成2</span><br><span class="line"></span><br><span class="line">mysql&gt; set global server_id=2; #此处的数值和my.cnf里设置的一样就行 </span><br><span class="line"></span><br><span class="line">在从（Slave）节点上设置主节点参数</span><br><span class="line"></span><br><span class="line">mysql&gt; CHANGE MASTER TO</span><br><span class="line">MASTER_HOST=&apos;192.168.199.149&apos;,</span><br><span class="line">MASTER_USER=&apos;repl&apos;,</span><br><span class="line">MASTER_PASSWORD=&apos;Ron_master_1&apos;,</span><br><span class="line">MASTER_LOG_FILE=&apos;binlog.000006&apos;,</span><br><span class="line">MASTER_LOG_POS=856;</span><br><span class="line"></span><br><span class="line">mysql&gt; show slave status\G;</span><br><span class="line"></span><br><span class="line">mysql&gt; start slave;</span><br><span class="line"></span><br><span class="line">mysql&gt; show slave status\G;</span><br></pre></td></tr></table></figure></p>
<h5 id="问题-1"><a href="#问题-1" class="headerlink" title="问题"></a>问题</h5><p>1.slave与master数据不一致导致<br>表示跳过一步错误，后面的数字可变<br>stop slave;<br>set global sql_slave_skip_counter =1;<br>start slave;</p>
<p>2.当master重启之后由于部分原因导致slave数据不同步，或者master文件更换等要对master进行日志刷新然后切换slave的文件指向<br>定时对master进行备份<br>mysqldump -uroot -p -hlocalhost &gt; mysql.bak.sql<br>导入数据备份<br>mysql&gt; source /tmp/mysql.bak.sql</p>
<p>主机上 flush logs;<br>change master to master_host = ‘192.168.128.100’, master_user = ‘rsync’, master_port=3306, master_password=’’, master_log_file = ‘mysqld-bin.000001’, master_log_pos=3260;</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2018-09-06T07:21:41.000Z" itemprop="dateUpdated">2018-09-06 15:21:41</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/2018/09/07/mysql-learning/" target="_blank" rel="external">https://chengbaobao630@github.io/2018/09/07/mysql-learning/</a>
        
    </div>
    
    <footer>
        <a href="https://chengbaobao630@github.io">
            <img src="/img/avatar.jpg" alt="Cheng Cheng">
            Cheng Cheng
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            

            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://chengbaobao630@github.io/2018/09/07/mysql-learning/&title=《mysql 搭建 学习》 — Hexo&pic=https://chengbaobao630@github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://chengbaobao630@github.io/2018/09/07/mysql-learning/&title=《mysql 搭建 学习》 — Hexo&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://chengbaobao630@github.io/2018/09/07/mysql-learning/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《mysql 搭建 学习》 — Hexo&url=https://chengbaobao630@github.io/2018/09/07/mysql-learning/&via=https://chengbaobao630@github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://chengbaobao630@github.io/2018/09/07/mysql-learning/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/09/07/algorithm/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">算法初探</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/09/07/transferInterviewOfGc/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">一个面试官对JVM面试问题的分析</h4>
      </a>
    </div>
  
</nav>



    

















</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cheng Cheng &copy; 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://chengbaobao630@github.io/2018/09/07/mysql-learning/&title=《mysql 搭建 学习》 — Hexo&pic=https://chengbaobao630@github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://chengbaobao630@github.io/2018/09/07/mysql-learning/&title=《mysql 搭建 学习》 — Hexo&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://chengbaobao630@github.io/2018/09/07/mysql-learning/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《mysql 搭建 学习》 — Hexo&url=https://chengbaobao630@github.io/2018/09/07/mysql-learning/&via=https://chengbaobao630@github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://chengbaobao630@github.io/2018/09/07/mysql-learning/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACJUlEQVR42u3aQXKDMAwFUO5/aXqAFPJlmcxgP1adjAE/Fqos6Tji67y9kjX3Kz9/P564MDAwXsuovrh/V7KH/C0YGBj7MK4ePff1+dPyvWFgYGDcr8k3kcMwMDAw+ozqUTNf/9OAi4GB8ULGrGQuSRlnlfAwMDD2YeRB8/d/P9LfwMDAeBXjLF73yVn1gFoNwZe7wsDAWJoxVkpLUrR+ulk+GGNgYCzNqDYp71+TbDcfzignixgYGMsxxoYeOl9rbODsS3MCAwNjA8asca65yEIDAAMDYwNGMhIxVtDPP1CSOEbTIhgYGBswqkfNfFSi30C9fA4GBsYGjE7BK29tVo+s+b0YGBhrMzrV9bwkl498JYwJLUwMDIxXMcaSuf74V6dIdzktgoGBsRkjKdaXi2KN/wZffsHAwFiaUS1vdYJmtWzX6VRiYGCsxOgUwvIjaH5vftw9Ol8LAwPjVYxOcjZWpKsG3/yNGBgYOzA6pfx8UKPTFo2alxgYGEszZoXXTgiutiv+qR1iYGBswMgrc3li10r48jUYGBhbMqoP6sym5cW1aK4NAwNjIcZZvO7TwVnbKo+dYWBgLM2o9gfHxrlmDbYODodhYGAswUiCbLWIn4fmseIdBgbGnoyxMlyOfy6VxMDAwOiX0vKmQnnAAgMDAyMejMiHJDqlvag9gIGBsTSjOjAxhskDdzmsY2BgLM3Ij455JpZsaGzIo9XIxMDAeB/jD6GsS6mu1dvDAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '死鬼去哪里了！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
